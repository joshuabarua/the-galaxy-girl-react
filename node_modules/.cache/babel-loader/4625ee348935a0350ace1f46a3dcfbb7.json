{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = loadBlockHoistPlugin;\n\nfunction _traverse() {\n  const data = require(\"@babel/traverse\");\n\n  _traverse = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _plugin = require(\"../config/plugin\");\n\nlet LOADED_PLUGIN;\n\nfunction loadBlockHoistPlugin() {\n  if (!LOADED_PLUGIN) {\n    LOADED_PLUGIN = new _plugin.default(Object.assign({}, blockHoistPlugin, {\n      visitor: _traverse().default.explode(blockHoistPlugin.visitor)\n    }), {});\n  }\n\n  return LOADED_PLUGIN;\n}\n\nfunction priority(bodyNode) {\n  const priority = bodyNode == null ? void 0 : bodyNode._blockHoist;\n  if (priority == null) return 1;\n  if (priority === true) return 2;\n  return priority;\n}\n\nfunction stableSort(body) {\n  const buckets = Object.create(null);\n\n  for (let i = 0; i < body.length; i++) {\n    const n = body[i];\n    const p = priority(n);\n    const bucket = buckets[p] || (buckets[p] = []);\n    bucket.push(n);\n  }\n\n  const keys = Object.keys(buckets).map(k => +k).sort((a, b) => b - a);\n  let index = 0;\n\n  for (const key of keys) {\n    const bucket = buckets[key];\n\n    for (const n of bucket) {\n      body[index++] = n;\n    }\n  }\n\n  return body;\n}\n\nconst blockHoistPlugin = {\n  name: \"internal.blockHoist\",\n  visitor: {\n    Block: {\n      exit({\n        node\n      }) {\n        const {\n          body\n        } = node;\n        let max = Math.pow(2, 30) - 1;\n        let hasChange = false;\n\n        for (let i = 0; i < body.length; i++) {\n          const n = body[i];\n          const p = priority(n);\n\n          if (p > max) {\n            hasChange = true;\n            break;\n          }\n\n          max = p;\n        }\n\n        if (!hasChange) return;\n        node.body = stableSort(body.slice());\n      }\n\n    }\n  }\n};","map":{"version":3,"sources":["/Users/josh/Projects/GalaxyGirl/g-girl/node_modules/@babel/core/lib/transformation/block-hoist-plugin.js"],"names":["Object","defineProperty","exports","value","default","loadBlockHoistPlugin","_traverse","data","require","_plugin","LOADED_PLUGIN","assign","blockHoistPlugin","visitor","explode","priority","bodyNode","_blockHoist","stableSort","body","buckets","create","i","length","n","p","bucket","push","keys","map","k","sort","a","b","index","key","name","Block","exit","node","max","Math","pow","hasChange","slice"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = loadBlockHoistPlugin;\n\nfunction _traverse() {\n  const data = require(\"@babel/traverse\");\n\n  _traverse = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _plugin = require(\"../config/plugin\");\n\nlet LOADED_PLUGIN;\n\nfunction loadBlockHoistPlugin() {\n  if (!LOADED_PLUGIN) {\n    LOADED_PLUGIN = new _plugin.default(Object.assign({}, blockHoistPlugin, {\n      visitor: _traverse().default.explode(blockHoistPlugin.visitor)\n    }), {});\n  }\n\n  return LOADED_PLUGIN;\n}\n\nfunction priority(bodyNode) {\n  const priority = bodyNode == null ? void 0 : bodyNode._blockHoist;\n  if (priority == null) return 1;\n  if (priority === true) return 2;\n  return priority;\n}\n\nfunction stableSort(body) {\n  const buckets = Object.create(null);\n\n  for (let i = 0; i < body.length; i++) {\n    const n = body[i];\n    const p = priority(n);\n    const bucket = buckets[p] || (buckets[p] = []);\n    bucket.push(n);\n  }\n\n  const keys = Object.keys(buckets).map(k => +k).sort((a, b) => b - a);\n  let index = 0;\n\n  for (const key of keys) {\n    const bucket = buckets[key];\n\n    for (const n of bucket) {\n      body[index++] = n;\n    }\n  }\n\n  return body;\n}\n\nconst blockHoistPlugin = {\n  name: \"internal.blockHoist\",\n  visitor: {\n    Block: {\n      exit({\n        node\n      }) {\n        const {\n          body\n        } = node;\n        let max = Math.pow(2, 30) - 1;\n        let hasChange = false;\n\n        for (let i = 0; i < body.length; i++) {\n          const n = body[i];\n          const p = priority(n);\n\n          if (p > max) {\n            hasChange = true;\n            break;\n          }\n\n          max = p;\n        }\n\n        if (!hasChange) return;\n        node.body = stableSort(body.slice());\n      }\n\n    }\n  }\n};"]},"metadata":{},"sourceType":"script"}